% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/calculate_pe_risk.R
\name{calculate_pe_risk}
\alias{calculate_pe_risk}
\title{Calculate Preeclampsia Risk}
\usage{
calculate_pe_risk(
  data,
  id_column = "id",
  method = c("formula", "online"),
  report_as_text = FALSE,
  G = 37,
  save_responses = FALSE,
  response_dir = "requests",
  url = "https://fetalmedicine.org/research/assess/preeclampsia/First",
  verbose = TRUE
)
}
\arguments{
\item{data}{Data frame containing patient data with required columns (see Details)}

\item{id_column}{String, name of column containing patient IDs (default: "id")}

\item{method}{Character, calculation method: "formula" or "online" (default: "formula")}

\item{report_as_text}{Boolean, whether to return risks as text fractions (default: FALSE)}

\item{G}{Numeric, gestational age cutoff in weeks for risk calculation (default: 37)}

\item{save_responses}{Boolean, whether to save online calculator responses (default: FALSE)}

\item{response_dir}{String, directory for saving responses (default: "requests")}

\item{url}{String, FMF calculator URL (default: "https://fetalmedicine.org/research/assess/preeclampsia/First")}

\item{verbose}{Boolean, whether to show progress messages (default: TRUE)}
}
\value{
Data frame containing original data plus additional columns:
\itemize{
\item mom_MAP: Mean Arterial Pressure MoM
\item mom_PI: Pulsatility Index MoM
\item mom_PlGF: PlGF MoM
\item risk_prior: Prior risk based on maternal characteristics
\item risk: Final risk incorporating biomarkers
}
}
\description{
Calculates preeclampsia risk for multiple patients using either a formula-based approach
or the Fetal Medicine Foundation's online calculator. This function processes multiple
patient records and returns risk scores along with biomarker MoM values.
}
\details{
Required input columns are defined by \code{\link{get_expected_columns}}. The function
supports two calculation methods:
\itemize{
\item formula: Uses local implementation of FMF algorithm
\item online: Submits data to FMF online calculator
}

For the online method, internet connectivity is required and the function will create
a response directory if save_responses is TRUE.
}
\section{Warning}{

This package is NOT intended for clinical use. Risk calculations should be verified
using official clinical tools.
}

\examples{
\dontrun{
# Calculate risks using formula method
results <- calculate_pe_risk(patient_data, method = "formula")

# Calculate risks using online calculator and save responses
results <- calculate_pe_risk(
  patient_data,
  method = "online",
  save_responses = TRUE,
  response_dir = "calculator_responses"
)
}

}
\seealso{
\code{\link{calculate_formula_risk}}, \code{\link{calculate_online_risk}}
}
\keyword{local}
\keyword{online}
